<!-- http://127.0.0.1/category?op=view&id=3432 -->
<!DOCTYPE html>
{{template "header"}}
<title>{{.Category.Title}} - 水利设计CMS系统</title>
  <link rel="stylesheet" href="/static/Font-Awesome-4.4.0/css/font-awesome.min.css">

  <!-- <link rel="stylesheet" href="/static/metismenu/dist/metisMenu.css"> 这个可以-->
  <link rel="stylesheet" href="/static/metismenu/test/demo.css">
<!-- <link rel="stylesheet" href="/static/metismenu/test/mini.css"> 这个不行-->
<!-- <link rel="stylesheet" href="/static/css/celanstyle.css"> -->

<!-- 徽章颜色 RoyalBlue-->
<style>
img{max-width:100%}
span.badge
{
background-color:#6495ED;
}
</style>


</head>

<body>
<div class="navbar navba-default navbar-fixed-top">
  <div class="container-fill">{{template "navbar" .}}</div>
</div>

<div class="col-lg-12">
  <h1>
    {{.Category.Number}}{{.Category.Title}}
    <a href="/category/modify?cid={{.Tid}}" class="btn btn-default">修改项目</a>
    <a href="/category/modifyfrm?cid={{.Tid}}" class="btn btn-default">修改目录</a>
  </h1>
{{range $k,$v :=.Label}}
  <a href="/category?op=viewlabel&label={{.Title}}" ><span class="label label-info">{{.Title}}</span></a>
{{end}}

</div>
<p>&nbsp; </p>

<!-- <div class="col-lg-12"> -->
<!-- <div class="container-fluid"> -->
<div class="col-lg-3">
<div class="clearfix">
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <ul class="metismenu" id="menu">
<!--           <li>
            <a href="#" aria-expanded="false">Menu 1 <span class="glyphicon arrow"></span></a>
            <ul aria-expanded="false">
              <li>
                <a href="#" aria-expanded="false">Menu 1.3 <span class="fa plus-times"></span></a>
                <ul aria-expanded="false">
                  <li><a href="#">item 1.3.1</a></li>
                  <li><a href="#">item 1.3.2</a></li>
                  <li><a href="#">item 1.3.3</a></li>
                  <li><a href="#">item 1.3.4</a></li>
                </ul>
              </li>
              <li>
                <a href="#" aria-expanded="false">Menu 1.5 <span class="fa plus-minus"></span></a>
                <ul aria-expanded="false">
                  <li><a href="#">item 1.5.1</a></li>
                  <li><a href="#">item 1.5.2</a></li>
                  <li><a href="#">item 1.5.3</a></li>
                  <li><a href="#">item 1.5.4</a></li>
                </ul>
              </li>
            </ul>
          </li> -->


            <li><a href="/category/viewbrief?id={{.Tid}}" target='main'>
            <i class="fa fa-square">&nbsp;项目简介</i>
            <!-- <span class="fa fa-dollar" style="font-size:200px"></span> -->
            <!-- http://www.yeahzan.com/fa/facss.html -->
          </a></li>

        {{range $k,$v :=.Categoryjieduan}}
        {{if $v.Isshow}}
          <li>
            <a href="#" aria-expanded="false"><i class="glyphicon glyphicon-stop"></i>&nbsp;{{.Title}} <span class="glyphicon arrow"></span></a>
            <ul aria-expanded="false">
            {{range $k1,$v1 :=$.Categoryzhuanye}}
                {{if eq $v.Id $v1.ParentId}}
                {{if $v1.Isshow}}
              <li>
                <a href="#" aria-expanded="false"><i class="glyphicon glyphicon-th-large"></i>&nbsp;{{.Title}} <span class="fa plus-minus"></span></a>
                <ul aria-expanded="false">
                      {{range $k2,$v2 :=$.Categorychengguo}}
                          {{if eq $v1.Id $v2.ParentId}}
                          {{if $v2.Isshow}}
                          <li><a href="/category/view?id={{.Id}}" target='main'>&nbsp;&nbsp;<i class="glyphicon glyphicon-th"></i>&nbsp;{{.Title}}-<span class="badge">{{.TopicCount}}</span></a></li>
                          {{end}}
                          {{end}}
                      {{end}}
                </ul>
              </li>
                {{end}}
                {{end}}
              {{end}}
            </ul>
          </li>
        {{end}}
        {{end}}

        </ul>
      </nav>
    </aside>

  </div>
  <!-- <hr> -->
</div>

      <div class="col-lg-9">
        <iframe src="/category/category_prod_view?id={{.Category.Id}}&title={{.Category.Title}}" name='main' id="iframepage" frameborder="0" width="100%" scrolling="no" marginheight="0" marginwidth="0" onLoad="iFrameHeight()"></iframe>
      </div>    
<!-- </div> -->
<!-- </div> -->

<!-- 自动适应高度 -->
<script type="text/javascript" language="javascript">   
function iFrameHeight() {   
var ifm= document.getElementById("iframepage");   
var subWeb = document.frames ? document.frames["iframepage"].document : ifm.contentDocument;   
if(ifm != null && subWeb != null) {
   ifm.height = subWeb.body.scrollHeight;
   ifm.width = subWeb.body.scrollWidth;
}   
}   
</script>

  <script src="/static/js/jquery-2.1.3.min.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <script src="/static/metismenu/dist/metisMenu.min.js"></script>
  <script>
    $(function() {

      $('#menu').metisMenu();
        cookieName: "MetisMenuState1"
      $('#menu2').metisMenu({
        toggle: false
        // cookieName: "MetisMenuState2"
      });

      $('#menu3').metisMenu({
        doubleTapToGo: true
      });

      $('#menu4').metisMenu();

    });

//     <ul>
//   <li>
//     <a href=""></a>
//     <ul>
//       <li>
//     <a href=""></a>
//     <ul>
//       <li>
//         <a href=""></a>
//         <ul>
//           <li>
//         <a href=""></a>
//         <ul>
//           <li>...</li>
//         </ul>
//           </li>
//         </ul>
//       </li>
//     </ul>
//       </li>
//     </ul>
//   </li>
// </ul>
//   </li>
// </ul>

// 可以使用js获取当前页面的url 和左侧的url对比 然后加active样式

// ;(function ($, window, document, undefined) {

//     var pluginName = "metisMenu",
//         defaults = {
//             toggle: true,
//             cookieName: "MetisMenuState",
//             cookieExpiration: 1 //Number of days
//         };
        
//     function Plugin(element, options) {
//         this.element = element;
//         this.settings = $.extend({}, defaults, options);
//         this._defaults = defaults;
//         this._name = pluginName;
//         this.init();
//     }

//     Plugin.prototype = {
//         init: function () {

//             var $this = $(this.element),
//                 $toggle = this.settings.toggle,
//                 $cookieName = this.settings.cookieName,
//                 $cookieExpiration = this.settings.cookieExpiration;

//             //Restores the menu state from cookies
//             var documentCookie = document.cookie;
//             $this.find("li").has("ul").each(function (i) {
//                 var pos = documentCookie.indexOf($cookieName + "_" + i + "=");
//                 if (pos > -1) {
//                     documentCookie.substr(pos).split("=")[1].indexOf("false") ? $(this).addClass("active") : $(this).removeClass("active");
//                 }
//             });

//             if (this.isIE() <= 9) {
//                 $this.find("li.active").has("ul").children("ul").collapse("show");
//                 $this.find("li").not(".active").has("ul").children("ul").collapse("hide");
//             } else {
//                 $this.find("li.active").has("ul").children("ul").addClass("collapse in");
//                 $this.find("li").not(".active").has("ul").children("ul").addClass("collapse");
//             }

//             $this.find("li").has("ul").children("a").on("click", function (e) {
//                 e.preventDefault();

//                 $(this).parent("li").toggleClass("active").children("ul").collapse("toggle");

//                 if ($toggle) {
//                     $(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide");
//                 }
                
//                 //Deletes all cookies
//                 var cookies = document.cookie.split(";");
//                 for (var i = 0; i < cookies.length; i++) {
//                     var cookie = cookies[i];
//                     var eqPos = cookie.indexOf("=");
//                     var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
//                     if (name.trim().slice(0, $cookieName.length) === $cookieName) {
//                         document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/";
//                     }
//                 }
//                 //Stores the menu state in cookies
//                 var date = new Date();
//                 date.setTime(date.getTime() + ($cookieExpiration * 24 * 60 * 60 * 1000));
//                 $this.find("li").has("ul").each(function (i) {
//                     document.cookie = $cookieName + "_" + i + "=" + $(this).hasClass("active") + ";expires=" + date.toGMTString() + ";path=/";
//                 });
//             });
//         },

//         isIE: function() {//https://gist.github.com/padolsey/527683
//             var undef,
//                 v = 3,
//                 div = document.createElement("div"),
//                 all = div.getElementsByTagName("i");

//             while (
//                 div.innerHTML = "<!--[if gt IE " + (++v) + "]><i></i><![endif]-->",
//                 all[0]
//             ) {
//                 return v > 4 ? v : undef;
//             }
//         }
//     };

//     $.fn[ pluginName ] = function (options) {
//         return this.each(function () {
//             if (!$.data(this, "plugin_" + pluginName)) {
//                 $.data(this, "plugin_" + pluginName, new Plugin(this, options));
//             }
//         });
//     };

// })(jQuery, window, document);

  </script>

<!-- <script type="text/javascript">
  $(document).ready(function() {
  $("table").tablesorter();
  // $("#ajax-append").click(function() {
  //    $.get("assets/ajax-content.html", function(html) {
  //     // append the "ajax'd" data to the table body
  //     $("table tbody").append(html);
  //     // let the plugin know that we made a update
  //     $("table").trigger("update");
  //     // set sorting column列号 and direction排序方式, this will sort on the first第一列降序 and third column第三列升序
  //     var sorting = [[2,1],[0,0]];
  //     // sort on the first column
  //     $("table").trigger("sorton",[sorting]);
  //   });
  //   return false;
  // });
});
</script> -->
  <!-- <script src="/static/js/jquery-2.1.3.min.js"></script> -->
  <!-- <script src="/static/js/bootstrap.min.js"></script> -->
  <!-- <script src="/static/metismenu/dist/metisMenu.min.js"></script> -->

  <!-- <script src="/static/js/jquery-2.1.3.min.js"></script> -->
  <!-- <script src="/static/js/celan.js"></script> -->
</body>
</html>